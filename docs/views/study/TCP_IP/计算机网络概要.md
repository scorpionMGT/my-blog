---
title: 计算机网络
date: 2022-04-10
tags:
 - 计算机网络
categories: 
 - 计算机网络
---
## 1  数据链路层

数据链路层是计算机网络的底层，它分为两种类型：
- 点对点信道: 这种信道是使用一对一的点对点通信方式
- 广播信道: 是一对多的广播通信方式

同一个局域网下的主机A与主机B急性通讯是不经过路由器，而是通过数据链路层，最常见的点对点的通信协议是PPP协议

## 2 数据链路层的三个基本问题是：封装成帧、透明传输、差错检测

数据链路层将网络层的IP数据报封装成帧发送到链路上，以及把接受到的帧内的数据交上给网络层

![三层简化模型](https://s1.ax1x.com/2022/04/12/LepyRI.png)

## 3 点对点的信道数据链路层

### 点对点协议PPP协议

互联网用户需要通过链接到某个ISP才能连接互联网，ppp协议就是用户计算机和ISP通讯时所用的数据链路层协议

![连接图](https://s1.ax1x.com/2022/04/12/LeS6DU.png)

## 4 以太网（传播电磁波的以太来命名）

早期的以太网是一种基带总线局域网，以太网用无源电缆作为总线来传递数据帧，由于商业竞争激烈，局域网未能形成一个统一的标准，IEEE802委员会把局域网中的数据链路层划分为两个子层
- 一个是逻辑链路控制层LLC（logical link control）
- 一个是媒体接入控制层MAC（medium access control）

![局域网数据链路层](https://s1.ax1x.com/2022/04/12/LeSRUJ.png)

之后技术的快速发展，以太网在市场中占据垄断优势，LLC逻辑链路控制层也逐渐消失，很多厂商生产的的适配器也只有MAC媒体接入控制层

### 4.1 以太网的MAC层，MAC层的硬件地址，或者称之为硬件地址，物理地址

在所有的计算机系统设计中，标识系统是核心问题，在标识系统中，地址就是识别某个系统的核心标识符**名字是指出我们要寻找的那个资源，地址是指出我们要寻找的那个资源在何处，路由是告诉我们怎么到达该地址** 严格的讲，名字应该与系统所在地无关 IEEE802标准为局域网规定了一种48位（6个字节）全球地址，是指局域网上的每一台计算机中固化的适配器ROM中的地址。严格的讲，局域网中的地址代表的是用户主机的名字或者标识符，IEEE注册管理机构RA 是局域网全球地址的法定管理机构，他负责分配地址的前三个字节（24位），凡是生产适配器的厂商都要向管理机构购买前三个字节地址，后三个字节由厂家自行分配

# 网络层

## 网络层向上只提供简单灵活的、无连接的、尽最大努力交付的数据报服务

网络的发送分组时不需要建立连接，每一个分组（IP数据报）独立发送，与其前后的分组无关，*网络层不提供服务质量的承诺* 也就是说网络层所传送的分组可能出错，丢失，重复，无序，分组的交付时间也无法保证，由于传输网络不提供端到端的可靠传输服务，这就使得互联网中的路由器变得简单，价格低廉


## 网际协议IP, 所谓IPv4 是IP协议的第四个版本

与ip协议配套使用有三个协议：

1. 地址解析协议ARP（address resolution protocal）
2. 网际控制报文协议ICMP （internet control message protocal）
3. 网际组管理协议IGMP （internet group management protocal）

![网络层](https://s1.ax1x.com/2022/04/12/LeSDg0.png)

一般来讲，要将互联网连接起来需要一些中间设备：

- 物理层使用的中间设备叫转发器
- 数据链路层使用的中间设备叫网桥或者桥接器
- 网络层使用的中间设备叫路由器router
- 在网络层以上使用的中间设备叫网关


## ip地址的分类

### ip地址及其表示方法

整个互联网可以看成一个单一的抽象的网络，IP地址就是给互联网上的每一台主机或者路由器，每一个接口分配一个全球唯一的32位的标识符（4个字节）

       ip 地址 = {<网络号> <主机号>}
       
![ip地址分类](https://s1.ax1x.com/2022/04/12/LeSrvV.png)

- A,B,C类地址的网络号字段，分别为1，2,3个字节长度，在网络号的最前面三位为类别，这三个数值为0，10， 110
- A,B,C类地址的主机号字段分别为3,2,1个字节长度
- D类地址为多播地址
- E类地址为保留地址

近年来已经使用无分类地址，因此分类地址已经成为了历史

![ip地址的书写方式](https://s1.ax1x.com/2022/04/12/LekYzd.png)

### 常用的三类IP地址

- A类地址的网络号字段占一个字节，只有7位可以使用（最前面一位固定为0）因此可以指派的网络号为2^7-2 (减去2的原因是，**第一是全是0的情况是保留地址，为本网络，第二个是全是01111111为127，保留为本地软件的回环测试本主机进程间的通信用**) A类地址主机号占用三个字节，因此A类主机数为2^24-2（这里减2的原因是因为，**第一全0表示本主机，第二是全1表示所有主机**），因此A类地址有2^31个占整个IP地址的2^32个的50%

- B类地址网络号占两个字节，前两位固定为（10）因此整个B类地址不会出现全0和全1的情况，因此不用减2，但是B类地址网络号和主机号会出现128.0.0.0，这个地址是不指派的，因此网络地址最小为128.1，为2^14-1,主机号的地址为2^16-2(排除全部是0和全部是1的情况), 因此B类地址约有2^30个地址，占整个IP地址数的25%

- C类地址网络号占3个字节，前三位固定(110)还有21位可以分配的，C类网络地址192.0.0.0是不指派的，因此可以指派的最小网络地址为192.0.1，因此C类地址的网络号数有2^21-1, C类地址的主机个数为2^8-2,因此C类地址占用整个IP地址数12.5%

![网络地址范围](https://s1.ax1x.com/2022/04/12/LeSW59.png)


![互联网中的IP地址](https://s1.ax1x.com/2022/04/12/LeS2E4.png)

## IP地址与MAC硬件地址

*物理地址是数据链路层和物理层使用的地址，IP地址是网络层及以上所使用的地址是一种逻辑地址*

![IP地址和MAC硬件地址的区别]()

## 地址解析协议ARP

我们知道一个主机的IP地址，需要找到其对应的物理地址，地址解析协议ARP就是解决此问题的

![地址解析协议ARP](https://s1.ax1x.com/2022/04/12/LeSrvV.png)

网络层是使用的IP地址，但是在数据链路层传输数据帧的时候使用的还是硬件地址

## IP 数据报的格式


![ip数据报的格式](https://s1.ax1x.com/2022/04/12/LeSyuT.png)


